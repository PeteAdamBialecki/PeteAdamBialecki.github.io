<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <!-- <script src="d3.v4.min.js" charset="utf-8"></script> -->
    <script src="d3.v3.js" charset="utf-8"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
</head>
<style>
    body { 
        background: #444;
    }
    .node {
        fill: rgb(103, 58, 58);
        stroke: #000;
        stroke-width: 2px;
    }
    path.link {
        stroke: #777;
        stroke-width: 2px;
        fill: none;
    }
</style>
<body>
    <div class="chart-wrapper" id="chart-line1"></div>
    <script type="text/javascript">
        var width = 640,
            height = 480;
        var nodes = [
            {name: 'Alice'},
            {name: 'Chris'},
            {name: 'Phil'}
        ];
        var links = [
            {source: 0, target: 1},
            {source: 1, target: 2},
            {source: 2, target: 0}
        ];
        var svg = d3.select('body').append('svg')
                        .attr('width', width)
                        .attr('height', height);
        // var path = svg.append("svg:g").selectAll("path")
        //                 .data(links)
        //                 .enter()
        //                 .append("svg:path")
        //                 .attr("class", "link");
        var node = svg.selectAll('.node')
                        .data(nodes)
                        .enter().append('circle')
                        .attr('class', 'node')
                        ;
        // var link = svg.selectAll('.link')
        //                 .data(links)
        //                 .enter()
        //                 .append('line')
        //                 .attr('class', 'link');
        var force = d3.layout.force()
                        .size([width, height])
                        .nodes(nodes)
                        .links(links)
                        .on("tick", tick)
                        .linkDistance(width/2)
                        .start();
        svg.append("svg:defs").selectAll("marker")
                        .data(["end"])
                        .enter().append("svg:marker")
                        .attr("id", String)
                        .attr("viewBox", "0 -5 10 10")
                        .attr("refX", 10) //play with these to adjust location
                        .attr("refY", -0.5)
                        .attr("markerWidth", 6)
                        .attr("markerHeight", 6)
                        .attr("orient", "auto")
                        .attr("fill", "#404040")
                        .append("svg:path")
                        .attr("d", "M0,-5L10,0L0,5");
        var path = svg.append("svg:g").selectAll("path")
                        .data(force.links())
                        .enter().append("svg:path")
                        .attr("class", "link")
                        .attr("marker-end", "url(#end)");
    
    
        function tick(e) {
            
            node.attr('r', width * 0.05)
                .attr('cx', function(d) { return d.x; })
                .attr('cy', function(d) { return d.y; })
                .call(force.drag) //let them be dragged around
                ;

            path.attr("d", function(d, i) {
                    
                    //setup the source and target points
        var dx = d.target.x - d.source.x, 
            dy = d.target.y - d.source.y,
            
            //calculate the curve with math!
            dr = Math.sqrt(dx * dx + dy * dy);
        
        //return the path using SVG Path Mini-Language
        return "M" +
            d.source.x + "," +
            d.source.y + "A" +
            dr + "," + dr + " 0 0,1 " +
            d.target.x + "," +
            d.target.y;
    });
}

    </script>
</body>
</html>
